app:
  async:
    core-pool-size: 8
    max-pool-size: 16
    queue-capacity: 100
    thread-name-prefix: question-gen-
  kafka:
    partitions: 1
    topics:
      answer: quiz.answers
      session: session.events
    replicas: 3
  open-api:
    description: @project.description@
    title: @project.name@
    version: @project.version@
spring:
  cache:
    type: redis
    redis:
      time-to-live: 3600000
      cache-null-values: false
  application:
    name: quiz-service
  data:
    redis:
      port: ${REDIS_PORT:6379}
      host: ${REDIS_HOST:localhost}
  datasource:
    password: ${DATABASE_PASSWORD:password}
    url: jdbc:postgresql://${DATABASE_HOST:localhost}:${DATABASE_PORT:5432}/${DATABASE_NAME:quiz_service}
    username: ${DATABASE_USER:default}
  kafka:
    properties:
      security.protocol: SASL_SSL
      sasl.mechanism: PLAIN
      sasl.jaas.config: org.apache.kafka.common.security.plain.PlainLoginModule required username='${KAFKA_API_KEY}' password='${KAFKA_API_SECRET}';
      basic.auth.credentials.source: USER_INFO
      schema.registry.basic.auth.user.info: ${SCHEMA_REGISTRY_API_KEY}:${SCHEMA_REGISTRY_API_SECRET}
      schema.registry.url: ${SCHEMA_REGISTRY_URL}
    producer:
      retries: 10
      acks: all
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      properties:
        delivery.timeout: 60000
        request.timeout.ms: 30000
        linger.ms: 0
        max.inflight.requests.per.connection: 5
        enable.idempotence: true
    bootstrap-servers: ${BOOTSTRAP_SERVERS:localhost:9092}
  profiles:
    active: dev
  jpa:
    properties:
      hibernate:
        format_sql: true
        show_sql: false
  ai.vertex.ai:
    gemini:
      chat:
        options:
          model: ${GEMINI_MODEL:gemini-2.5-flash}
          response-mime-type: application/json
      project-id: ${GCP_PROJECT_ID:edupulse-483220}
      location: ${GCP_REGION:us-central1}
      # credentials-uri is optional - if not set, uses Application Default Credentials (ADC)
      # For Cloud Run: ADC is automatic via service account
      # For local dev: use 'gcloud auth application-default login' or set GOOGLE_APPLICATION_CREDENTIALS
      credentials-uri: ${VERTEX_AI_CREDENTIALS_URI:}
jwt:
  security:
    public-paths: /**
#    public-paths: /swagger-ui/**, /v3/api-docs/**, /actuator/health/**, /error/**, /api/students/**
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      probes:
        enabled: true
      show-details: when-authorized
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true